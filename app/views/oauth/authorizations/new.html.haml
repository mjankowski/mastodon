- content_for :page_title do
  = t('doorkeeper.authorizations.new.title')

.form-container.simple_form
  .oauth-prompt
    %h3= t('doorkeeper.authorizations.new.title')

    %p= t('doorkeeper.authorizations.new.prompt_html', client_name: content_tag(:strong, @pre_auth.client.name))

    %h3= t('doorkeeper.authorizations.new.review_permissions')

    %ul.permissions-list
      - grouped_scopes(@pre_auth.scopes).each do |scope|
        %li.permissions-list__item
          .permissions-list__item__icon
            = material_symbol('check')
          .permissions-list__item__text
            .permissions-list__item__text__title
              = t(scope.key, scope: [:doorkeeper, :grouped_scopes, :title])
            .permissions-list__item__text__type
              = t(scope.access, scope: [:doorkeeper, :grouped_scopes, :access])

    .actions
      = form_with url: oauth_authorization_path do |form|
        = render form, pre_auth: @pre_auth
        = form.button t('doorkeeper.authorizations.buttons.authorize'),
                      type: :submit,
                      class: 'btn'

      = form_with url: oauth_authorization_path, method: :delete do |form|
        = render form, pre_auth: @pre_auth
        = form.button t('doorkeeper.authorizations.buttons.deny'),
                      type: :submit,
                      class: 'btn negative'
